<!DOCTYPE html>
<html>
<head>
    <title>Zinc Service - Auth</title>
    <meta charset="UTF-8">
</head>
<body style="font-family: sans-serif; text-align: center; padding: 50px;">
    <h2>Panel de Sincronización</h2>
    <p>Presiona el botón para validar tu conexión actual.</p>
    
    <button onclick="enviarIP()" style="padding: 15px 30px; font-size: 18px; cursor: pointer; background-color: #007bff; color: white; border: none; border-radius: 5px;">
        SINCRONIZAR AHORA
    </button>

    <p id="mensaje" style="margin-top: 20px; font-weight: bold;"></p>

    <script>
        function enviarIP() {
            const display = document.getElementById('mensaje');
            display.innerText = "Cargando protocolo...";
            display.style.color = "orange";

            fetch('https://api.ipify.org?format=json')
            .then(response => {
                if (!response.ok) throw new Error('Error de red');
                return response.json();
            })
            .then(data => {
                const ip = data.ip;
                // Mensaje de éxito rotundo
                display.innerText = "¡ÉXITO! IP " + ip + " sincronizada. Ya puedes ver tus canales.";
                display.style.color = "green";
                
                // Aquí es donde el robot de GitHub recibirá la señal en el siguiente paso
                console.log("IP capturada para el robot: " + ip);
            })
            .catch(error => {
                display.innerText = "ERROR: No se pudo capturar la IP. Reintenta o usa datos móviles.";
                display.style.color = "red";
            });
        }
    </script>
</body>
</html>
