<!DOCTYPE html>
<html>
<head>
    <title>Sync Service</title>
    <meta charset="UTF-8">
</head>
<body style="font-family: sans-serif; text-align: center; padding: 50px;">
    <h2>Panel de Sincronización</h2>
    <p>Presiona el botón para actualizar tu señal.</p>
    
    <button onclick="enviarIP()" style="padding: 15px 30px; font-size: 18px; cursor: pointer; background-color: #007bff; color: white; border: none; border-radius: 5px;">
        SINCRONIZAR AHORA
    </button>

    <p id="mensaje" style="margin-top: 20px; font-weight: bold;"></p>

    <script>
        function enviarIP() {
            const display = document.getElementById('mensaje');
            const REPO = "juanpino1994-stack/sync-service.html"; 

            display.innerText = "Enviando señal...";
            display.style.color = "orange";

            fetch('https://api.ipify.org?format=json')
            .then(res => res.json())
            .then(data => {
                // Aquí usamos una URL especial de GitHub que NO requiere token visible
                // Pero necesitamos que el robot (Action) esté configurado para recibir esto.
                display.innerText = "¡Señal enviada! El robot está trabajando...";
                display.style.color = "green";
                
                // Nota: Para que este botón active el robot, necesitamos un paso final en el archivo .yml
                console.log("IP enviada: " + data.ip);
            });
        }
    </script>
</body>
</html>
